<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>

        /**
         *   知识点总结:
         *   1  在类的内部检查该类中的this对象是否是类本身, 避免this指向windows,
         *      就当前这种情况, 在一些闭包中,可以进行探测处理,看看当前的 this具体的指向。
         *
         *   2  实力化类的时候, 如何做到对new关键词的省略,而且不影响类的实例化。
         *
         *
         * */




        /* 对类进行检查处理  */

        var Books = function (title, time, type) {
            this.title = title;
            this.time = time;
            this.type = type;
        }

        // 没有约束, 导致this变量指向了windows;
        var book = Books('js', '2017-12-26', 'processer');
        console.log(book);
        // 指向windows的测试。
        console.log(window.title);

        // 使用New 关键词,来调整this的指向,
        var book1 = new Books('java', '2017-12-26', 'processer');
        console.log(book1);


        // 其他的解决方法,重点在与对new 参数的遗漏后,该如何避免,
        // 或是就不想使用new关键词来实例化一个对象,

        var Bookss = function (title, time, type) {
            if (this instanceof Bookss) {
                this.title = title;
                this.time = time;
                this.type = type;
            } else {
                return new Books(title, time, type);
            }
        }

        var books = Bookss('php', '2017-12-26', 'process');
        console.log(books);


    </script>
</head>
<body>
</body>
</html>